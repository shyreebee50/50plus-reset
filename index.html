<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>50Plus Reset - Your Healing Journey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: #2d5016;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.2);
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            overflow-x: auto;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(16, 185, 129, 0.1);
            padding: 0 0.5rem;
        }

        .nav-tab {
            flex: 0 0 auto;
            padding: 1rem 0.8rem;
            text-align: center;
            background: none;
            border: none;
            color: #047857;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .nav-tab.active {
            color: #10b981;
            border-bottom-color: #10b981;
            background: rgba(16, 185, 129, 0.05);
        }

        .section {
            display: none;
            padding: 1rem;
            max-width: 100%;
            margin: 0 auto;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            color: #047857;
            margin-bottom: 1rem;
            font-size: 1.4rem;
            font-weight: 500;
        }

        .section h3 {
            color: #059669;
            margin: 1rem 0 0.5rem;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(34, 197, 94, 0.1);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.08);
        }

        .btn {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        .input-group {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            align-items: center;
        }

        .input-field {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.9);
            color: #047857;
            font-size: 0.9rem;
        }

        .input-field:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .fasting-window {
            background: linear-gradient(135deg, #ecfdf5, #f0fdf4);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1rem 0;
            text-align: center;
            border: 2px solid rgba(52, 211, 153, 0.2);
        }

        .fasting-window h3 {
            color: #047857;
            margin-bottom: 0.5rem;
        }

        .fasting-window .current-window {
            font-size: 1.2rem;
            font-weight: 600;
            color: #10b981;
            margin: 0.5rem 0;
        }

        .fasting-window .cycle-info {
            font-size: 0.9rem;
            color: #059669;
        }

        .goals-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
            margin: 1rem 0;
        }
        
        @media (max-width: 480px) {
            .goals-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .goal-item {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .goal-item:hover {
            border-color: rgba(16, 185, 129, 0.3);
            transform: translateY(-2px);
        }

        .goal-item.completed {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.2);
        }

        .meals-grid {
            display: grid;
            gap: 0.8rem;
        }

        .meal-slot {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(52, 211, 153, 0.1);
        }

        .meal-slot:hover {
            border-color: rgba(16, 185, 129, 0.3);
            transform: translateY(-2px);
        }

        .meal-slot.logged {
            background: linear-gradient(135deg, #ecfdf5, #f0fdf4);
            border-color: #10b981;
        }

        .meal-name {
            font-weight: 500;
            color: #047857;
        }

        .meal-status {
            font-size: 0.8rem;
            color: #059669;
        }

        .recipe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .recipe-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(34, 197, 94, 0.1);
        }

        .recipe-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.15);
        }

        .recipe-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #047857;
            margin-bottom: 0.5rem;
        }

        .recipe-description {
            color: #059669;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .recipe-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .recipe-tag {
            background: rgba(16, 185, 129, 0.1);
            color: #047857;
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
        }

        .verse-card {
            background: linear-gradient(135deg, #f0fdf4, #ecfdf5);
            border: 1px solid rgba(34, 197, 94, 0.15);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.08);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .verse-text {
            color: #047857;
            font-size: 1.2rem;
            line-height: 1.8;
            font-style: italic;
            margin-bottom: 1rem;
        }

        .verse-reference {
            color: #10b981;
            font-weight: 600;
            text-align: right;
        }

        .exercise-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 1px solid rgba(34, 197, 94, 0.1);
        }

        .exercise-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #047857;
            margin-bottom: 0.5rem;
        }

        .exercise-description {
            color: #059669;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .exercise-link {
            display: inline-block;
            background: rgba(16, 185, 129, 0.1);
            color: #047857;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            margin: 0.2rem;
            transition: all 0.3s ease;
        }

        .exercise-link:hover {
            background: rgba(16, 185, 129, 0.2);
            transform: translateY(-1px);
        }

        @media (max-width: 768px) {
            .nav-tabs {
                padding: 0 0.2rem;
            }
            
            .nav-tab {
                padding: 0.8rem 0.5rem;
                font-size: 0.7rem;
            }
            
            .section {
                padding: 0.8rem;
            }
            
            .card {
                padding: 1rem;
            }
        }

        @keyframes gentle-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .pulse {
            animation: gentle-pulse 2s ease-in-out infinite;
        }

        .text-center { text-align: center; }
        .mb-1 { margin-bottom: 1rem; }
        .mt-1 { margin-top: 1rem; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåø 50Plus Reset</h1>
        <div class="subtitle">Your Healing Journey ‚Ä¢ Hormone Balance & Wellness</div>
    </div>

    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="showSection('daily')">üè† Daily</button>
        <button class="nav-tab" onclick="showSection('faith')">‚ú® Faith</button>
        <button class="nav-tab" onclick="showSection('recipes')">üç≥ Recipes</button>
        <button class="nav-tab" onclick="showSection('exercise')">üí™ Movement</button>
        <button class="nav-tab" onclick="showSection('progress')">üìä Progress</button>
        <button class="nav-tab" onclick="showSection('period')">üå∏ Cycle</button>
        <button class="nav-tab" onclick="showSection('migraine')">üß† Migraine</button>
        <button class="nav-tab" onclick="showSection('guides')">üìñ Guides</button>
        <button class="nav-tab" onclick="showSection('shopping')">üõí Shopping</button>
    </nav>

    <!-- DAILY TRACKER SECTION -->
    <div id="daily" class="section active">
        <div class="fasting-window pulse">
            <h3>üïê Intermittent Fasting Window</h3>
            <div class="current-window" id="fastingWindow">16:8 (Not on cycle)</div>
            <div class="cycle-info">
                <div>üå∏ On cycle: 12:12 ‚Ä¢ üåô Not on cycle: 16:8</div>
                <button class="btn btn-small" onclick="toggleFastingWindow()" style="margin-top: 0.5rem;">Toggle Cycle Status</button>
            </div>
        </div>

        <div class="card">
            <h3>üéØ Today's Goals</h3>
            <div class="goals-grid">
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üíß</div>
                    <div>8 Glasses Water</div>
                </div>
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üö∂‚Äç‚ôÄÔ∏è</div>
                    <div>10 Min Walk</div>
                </div>
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üßò‚Äç‚ôÄÔ∏è</div>
                    <div>5 Min Peace</div>
                </div>
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üåø</div>
                    <div>Stress Reduction</div>
                </div>
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üìñ</div>
                    <div>Daily Reading</div>
                </div>
                <div class="goal-item" onclick="toggleGoal(this)">
                    <div>üò¥</div>
                    <div>Quality Sleep</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üçΩÔ∏è Today's Meals (IF-Friendly)</h3>
            <p style="color: #059669; font-size: 0.9rem; margin-bottom: 1rem;">2 meals + 1 snack approach for natural fasting</p>
            <div class="meals-grid">
                <div class="meal-slot" onclick="toggleMeal(this, 'breakfast')">
                    <div class="meal-name">üåÖ First Meal (11am-1pm)</div>
                    <div class="meal-status">Tap to log</div>
                </div>
                <div class="meal-slot" onclick="toggleMeal(this, 'snack')">
                    <div class="meal-name">üçé Healthy Snack (3pm-4pm)</div>
                    <div class="meal-status">Tap to log</div>
                </div>
                <div class="meal-slot" onclick="toggleMeal(this, 'dinner')">
                    <div class="meal-name">üåô Last Meal (6pm-7pm)</div>
                    <div class="meal-status">Tap to log</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üí™ Today's Movement</h3>
            <div class="exercise-card">
                <div class="exercise-title">Gentle Morning Flow</div>
                <div class="exercise-description">10-minute cortisol-reducing stretches</div>
                <button class="btn btn-small" onclick="markExerciseComplete(this)">Complete ‚úì</button>
            </div>
        </div>
    </div>

    <!-- FAITH SECTION -->
    <div id="faith" class="section">
        <h2>‚ú® Daily Faith & Inspiration</h2>
        
        <div class="verse-card">
            <div class="verse-text">"She is clothed with strength and dignity; she can laugh at the days to come."</div>
            <div class="verse-reference">Proverbs 31:25</div>
        </div>

        <div class="card">
            <h3>üôè Today's Reflection</h3>
            <p style="color: #059669; margin-bottom: 1rem;">Take a moment to reflect on God's goodness in your life today.</p>
            <textarea 
                id="dailyReflection" 
                placeholder="Write your thoughts, prayers, or gratitude here..."
                style="width: 100%; height: 100px; padding: 1rem; border: 2px solid rgba(16, 185, 129, 0.2); border-radius: 12px; resize: vertical; font-family: inherit; background: rgba(255, 255, 255, 0.9); color: #047857; transition: border-color 0.3s ease;"
                onchange="saveReflection()"
                onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16, 185, 129, 0.1)'"
                onblur="this.style.borderColor='rgba(16, 185, 129, 0.2)'; this.style.boxShadow='none'"
            ></textarea>
        </div>

        <div class="card">
            <h3>üìñ Weekly Verses</h3>
            <div id="weeklyVerses">
                <div style="background: linear-gradient(135deg, #ecfdf5, #f0fdf4); border-radius: 12px; margin: 0.5rem 0; padding: 1rem; border: 1px solid rgba(52, 211, 153, 0.15);">
                    <div style="font-weight: 600; color: #047857; margin-bottom: 0.5rem;">Monday</div>
                    <div style="font-style: italic; color: #059669; line-height: 1.6;">"Cast all your anxiety on him because he cares for you." - 1 Peter 5:7</div>
                </div>
                <div style="background: linear-gradient(135deg, #ecfdf5, #f0fdf4); border-radius: 12px; margin: 0.5rem 0; padding: 1rem; border: 1px solid rgba(52, 211, 153, 0.15);">
                    <div style="font-weight: 600; color: #047857; margin-bottom: 0.5rem;">Tuesday</div>
                    <div style="font-style: italic; color: #059669; line-height: 1.6;">"I can do all things through Christ who strengthens me." - Philippians 4:13</div>
                </div>
                <div style="background: linear-gradient(135deg, #ecfdf5, #f0fdf4); border-radius: 12px; margin: 0.5rem 0; padding: 1rem; border: 1px solid rgba(52, 211, 153, 0.15);">
                    <div style="font-weight: 600; color: #047857; margin-bottom: 0.5rem;">Wednesday</div>
                    <div style="font-style: italic; color: #059669; line-height: 1.6;">"Be strong and courageous! Do not be afraid or discouraged." - Joshua 1:9</div>
                </div>
            </div>
        </div>
    </div>

    <!-- RECIPES SECTION -->
    <div id="recipes" class="section">
        <h2>üç≥ Healthy Low-Sugar Recipes</h2>
        <p style="color: #059669; margin-bottom: 1rem;">All recipes avoid refined sugar and white flour ‚Ä¢ Perfect for cortisol reduction</p>
        
        <h3>üåÖ First Meal (Breaking Fast)</h3>
        <div class="recipe-grid">
            <div class="recipe-card" onclick="showRecipe('avocado-eggs')">
                <div class="recipe-title">Creamy Avocado Scramble</div>
                <div class="recipe-description">Pasture-raised eggs with avocado, spinach, and herbs</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">High Protein</span>
                    <span class="recipe-tag">Healthy Fats</span>
                    <span class="recipe-tag">10 min</span>
                </div>
            </div>
            
            <div class="recipe-card" onclick="showRecipe('chia-pudding')">
                <div class="recipe-title">Vanilla Chia Pudding</div>
                <div class="recipe-description">Coconut milk, chia seeds, monk fruit, vanilla</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Make Ahead</span>
                    <span class="recipe-tag">Fiber Rich</span>
                    <span class="recipe-tag">No Sugar</span>
                </div>
            </div>

            <div class="recipe-card" onclick="showRecipe('green-smoothie')">
                <div class="recipe-title">Hormone Balance Smoothie</div>
                <div class="recipe-description">Spinach, cucumber, lemon, ginger, collagen</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Detox</span>
                    <span class="recipe-tag">Anti-inflammatory</span>
                    <span class="recipe-tag">5 min</span>
                </div>
            </div>
        </div>

        <h3>ü•ó Light Meals & Snacks</h3>
        <div class="recipe-grid">
            <div class="recipe-card" onclick="showRecipe('cucumber-boats')">
                <div class="recipe-title">Cucumber Hummus Boats</div>
                <div class="recipe-description">Fresh cucumber filled with tahini hummus</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Raw</span>
                    <span class="recipe-tag">Cooling</span>
                    <span class="recipe-tag">Low Carb</span>
                </div>
            </div>

            <div class="recipe-card" onclick="showRecipe('almond-crackers')">
                <div class="recipe-title">Herbed Almond Crackers</div>
                <div class="recipe-description">Ground almonds, herbs, olive oil - no flour</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Grain Free</span>
                    <span class="recipe-tag">Protein</span>
                    <span class="recipe-tag">Batch Make</span>
                </div>
            </div>

            <div class="recipe-card" onclick="showRecipe('golden-milk')">
                <div class="recipe-title">Golden Milk Latte</div>
                <div class="recipe-description">Turmeric, coconut milk, cinnamon, ginger</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Anti-inflammatory</span>
                    <span class="recipe-tag">Evening</span>
                    <span class="recipe-tag">Cortisol Support</span>
                </div>
            </div>
        </div>

        <h3>üåô Nourishing Dinners</h3>
        <div class="recipe-grid">
            <div class="recipe-card" onclick="showRecipe('herb-salmon')">
                <div class="recipe-title">Herb-Crusted Salmon</div>
                <div class="recipe-description">Wild salmon with dill, parsley, lemon</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Omega-3</span>
                    <span class="recipe-tag">20 min</span>
                    <span class="recipe-tag">Heart Healthy</span>
                </div>
            </div>

            <div class="recipe-card" onclick="showRecipe('zucchini-noodles')">
                <div class="recipe-title">Zucchini Noodle Bowl</div>
                <div class="recipe-description">Spiralized zucchini with pesto and cherry tomatoes</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Vegetable Base</span>
                    <span class="recipe-tag">Light</span>
                    <span class="recipe-tag">Fresh</span>
                </div>
            </div>

            <div class="recipe-card" onclick="showRecipe('bone-broth-soup')">
                <div class="recipe-title">Healing Bone Broth Soup</div>
                <div class="recipe-description">Nutrient-dense broth with vegetables and herbs</div>
                <div class="recipe-tags">
                    <span class="recipe-tag">Healing</span>
                    <span class="recipe-tag">Gut Health</span>
                    <span class="recipe-tag">Warming</span>
                </div>
            </div>
        </div>
    </div>

    <!-- EXERCISE SECTION -->
    <div id="exercise" class="section">
        <h2>üí™ Gentle Movement (10-Min Sessions)</h2>
        <p style="color: #059669; margin-bottom: 1rem;">Cortisol-reducing exercises perfect for 50+ women</p>

        <div class="exercise-card">
            <div class="exercise-title">üßò‚Äç‚ôÄÔ∏è Morning Stretch Flow</div>
            <div class="exercise-description">Gentle stretches to awaken your body and reduce morning stiffness</div>
            <div>
                <a href="https://www.youtube.com/watch?v=g_tea8ZNk5A" target="_blank" class="exercise-link">üé• YouTube: 10-Min Morning Stretch</a>
                <a href="https://www.doyogawithme.com/content/morning-stretch" target="_blank" class="exercise-link">üßò Movement Flow</a>
            </div>
        </div>

        <div class="exercise-card">
            <div class="exercise-title">üèÉ‚Äç‚ôÄÔ∏è Walking Cardio</div>
            <div class="exercise-description">Low-impact cardio that supports hormone balance</div>
            <div>
                <a href="https://www.youtube.com/watch?v=wCfJOB1nLeY" target="_blank" class="exercise-link">üé• 10-Min Indoor Walk</a>
                <a href="https://www.youtube.com/watch?v=2MjON1F2pKs" target="_blank" class="exercise-link">üö∂‚Äç‚ôÄÔ∏è Walking Workout</a>
            </div>
        </div>

        <div class="exercise-card">
            <div class="exercise-title">üí™ Light Weight Bearing</div>
            <div class="exercise-description">Bone-strengthening exercises with light weights or body weight</div>
            <div>
                <a href="https://www.youtube.com/watch?v=UBMk30rjy0o" target="_blank" class="exercise-link">üé• Chair Exercises</a>
                <a href="https://www.youtube.com/watch?v=4BOTvaRaDjI" target="_blank" class="exercise-link">üí™ Senior Strength</a>
            </div>
        </div>

        <div class="exercise-card">
            <div class="exercise-title">üå∏ Stress-Relief Stretching</div>
            <div class="exercise-description">Targeted stretches to release tension and lower cortisol</div>
            <div>
                <a href="https://www.youtube.com/watch?v=GLy2rYHwUqY" target="_blank" class="exercise-link">üé• Stress Relief Stretches</a>
                <a href="https://www.youtube.com/watch?v=8TuRYV2N-Vs" target="_blank" class="exercise-link">üòå Bedtime Stretches</a>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let onCycle = false;
        let mealLog = {};
        let exerciseComplete = {};

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateFastingWindow();
            loadReflection();
        });

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            localStorage.setItem('currentSection', sectionId);
        }

        function toggleFastingWindow() {
            onCycle = !onCycle;
            updateFastingWindow();
            saveData();
        }

        function updateFastingWindow() {
            const windowElement = document.getElementById('fastingWindow');
            if (onCycle) {
                windowElement.textContent = '12:12 (On cycle)';
                windowElement.style.background = 'linear-gradient(135deg, #fdf2f8, #fcf4ff)';
            } else {
                windowElement.textContent = '16:8 (Not on cycle)';
                windowElement.style.background = 'linear-gradient(135deg, #ecfdf5, #f0fdf4)';
            }
        }

        function toggleGoal(element) {
            element.classList.toggle('completed');
            saveData();
            
            element.style.transform = 'scale(1.1)';
            setTimeout(() => {
                element.style.transform = 'scale(1)';
            }, 150);
        }

        function toggleMeal(element, mealType) {
            const isLogged = element.classList.contains('logged');
            
            if (isLogged) {
                element.classList.remove('logged');
                element.querySelector('.meal-status').textContent = 'Tap to log';
                mealLog[mealType] = false;
            } else {
                element.classList.add('logged');
                element.querySelector('.meal-status').textContent = '‚úì Logged';
                mealLog[mealType] = true;
            }
            
            saveData();
        }

        function markExerciseComplete(button) {
            if (button.classList.contains('completed')) {
                button.classList.remove('completed');
                button.textContent = 'Complete ‚úì';
                button.style.background = '';
            } else {
                button.classList.add('completed');
                button.textContent = '‚úì Completed!';
                button.style.background = 'linear-gradient(135deg, #10b981, #34d399)';
                
                button.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    button.style.transform = 'scale(1)';
                }, 200);
            }
            saveData();
        }

        function saveReflection() {
            const reflection = document.getElementById('dailyReflection').value;
            localStorage.setItem('dailyReflection', reflection);
        }

        function loadReflection() {
            const saved = localStorage.getItem('dailyReflection');
            if (saved) {
                document.getElementById('dailyReflection').value = saved;
            }
        }

        function showRecipe(recipeId) {
            alert(`Opening ${recipeId} recipe! (You can expand this feature)`);
        }

        function saveData() {
            const data = {
                onCycle: onCycle,
                mealLog: mealLog,
                exerciseComplete: exerciseComplete,
                date: new Date().toDateString()
            };
            localStorage.setItem('50plusResetData', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('50plusResetData');
            if (saved) {
                const data = JSON.parse(saved);
                
                if (data.date === new Date().toDateString()) {
                    onCycle = data.onCycle || false;
                    mealLog = data.mealLog || {};
                    exerciseComplete = data.exerciseComplete || {};
                    
                    restoreUIState();
                }
            }
        }

        function restoreUIState() {
            Object.keys(mealLog).forEach(mealType => {
                if (mealLog[mealType]) {
                    const mealElement = document.querySelector(`[onclick*="${mealType}"]`);
                    if (mealElement) {
                        mealElement.classList.add('logged');
                        mealElement.querySelector('.meal-status').textContent = '‚úì Logged';
                    }
                }
            });
            
            updateFastingWindow();
        }
    </script>
</body>
</html>
<!-- PROGRESS TRACKER SECTION -->
    <div id="progress" class="section">
        <h2>üìä Progress Tracker</h2>

        <div class="card">
            <h3>‚öñÔ∏è Weight Tracker</h3>
            <div class="input-group">
                <input type="number" class="input-field" id="weightInput" placeholder="Enter weight" step="0.1">
                <button class="btn btn-small" onclick="addWeight()">Add Weight</button>
            </div>
            <div id="weightHistory" style="margin-top: 1rem;">
                <p style="color: #6b7280;">No weight entries yet</p>
            </div>
        </div>

        <div class="card">
            <h3>üìè Measurements Tracker</h3>
            <div style="display: grid; gap: 0.5rem;">
                <div class="input-group">
                    <input type="number" class="input-field" id="waistInput" placeholder="Waist (inches)" step="0.1">
                    <button class="btn btn-small" onclick="addMeasurement('waist')">Add Waist</button>
                </div>
                <div class="input-group">
                    <input type="number" class="input-field" id="hipsInput" placeholder="Hips (inches)" step="0.1">
                    <button class="btn btn-small" onclick="addMeasurement('hips')">Add Hips</button>
                </div>
                <div class="input-group">
                    <input type="number" class="input-field" id="armsInput" placeholder="Arms (inches)" step="0.1">
                    <button class="btn btn-small" onclick="addMeasurement('arms')">Add Arms</button>
                </div>
            </div>
            <div id="measurementHistory" style="margin-top: 1rem;">
                <p style="color: #6b7280;">No measurements yet</p>
            </div>
        </div>

        <div class="card">
            <h3>üì∏ Progress Photos</h3>
            <p style="color: #059669; margin-bottom: 1rem;">Track your transformation with photos</p>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin: 1rem 0;">
                <div style="aspect-ratio: 3/4; background: linear-gradient(135deg, #f3f4f6, #e5e7eb); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #6b7280; cursor: pointer; border: 2px dashed rgba(16, 185, 129, 0.3); transition: all 0.3s ease; text-align: center; font-size: 0.9rem;" onclick="addPhoto('front')" id="frontPhoto">
                    üì∑<br>Front View<br><small>Tap to add</small>
                </div>
                <div style="aspect-ratio: 3/4; background: linear-gradient(135deg, #f3f4f6, #e5e7eb); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #6b7280; cursor: pointer; border: 2px dashed rgba(16, 185, 129, 0.3); transition: all 0.3s ease; text-align: center; font-size: 0.9rem;" onclick="addPhoto('side')" id="sidePhoto">
                    üì∑<br>Side View<br><small>Tap to add</small>
                </div>
            </div>
            <input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload()">
        </div>
    </div>

    <!-- PERIOD TRACKER SECTION -->
    <div id="period" class="section">
        <h2>üå∏ Cycle Tracker</h2>

        <div style="text-align: center; padding: 2rem; background: linear-gradient(135deg, #fef7ff, #f3e8ff); border: 2px solid rgba(168, 85, 247, 0.15); box-shadow: 0 8px 30px rgba(168, 85, 247, 0.1); border-radius: 20px; margin: 1rem 0;">
            <div style="font-size: 2rem; font-weight: 600; color: #7c3aed; margin-bottom: 0.5rem;" id="currentCycleDay">Day 1</div>
            <div style="color: #8b5cf6; font-weight: 500; margin-bottom: 1rem;" id="currentPhase">Menstrual Phase</div>
            <div style="color: #a855f7; margin-bottom: 1rem;">Track your cycle for better hormone balance</div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                <div style="text-align: center; padding: 1rem; background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(168, 85, 247, 0.1); border-radius: 12px;">
                    <div style="font-size: 1.3rem; font-weight: 600; color: #7c3aed;" id="avgCycleLength">28</div>
                    <div style="font-size: 0.8rem; color: #047857; margin-top: 0.2rem;">Average Cycle</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(168, 85, 247, 0.1); border-radius: 12px;">
                    <div style="font-size: 1.3rem; font-weight: 600; color: #7c3aed;" id="periodDays">5</div>
                    <div style="font-size: 0.8rem; color: #047857; margin-top: 0.2rem;">Period Days</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(168, 85, 247, 0.1); border-radius: 12px;">
                    <div style="font-size: 1.3rem; font-weight: 600; color: #7c3aed;" id="nextPeriod">23</div>
                    <div style="font-size: 0.8rem; color: #047857; margin-top: 0.2rem;">Days Until</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: rgba(255, 255, 255, 0.9); border: 1px solid rgba(168, 85, 247, 0.1); border-radius: 12px;">
                    <div style="font-size: 1.3rem; font-weight: 600; color: #7c3aed;" id="lastPeriod">5</div>
                    <div style="font-size: 0.8rem; color: #047857; margin-top: 0.2rem;">Last Period</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìÖ Update Cycle Info</h3>
            <div class="input-group">
                <input type="number" class="input-field" id="cycleLengthInput" placeholder="Cycle length (days)" value="28">
                <button class="btn btn-small" onclick="updateCycleLength()">Update</button>
            </div>
            <div class="input-group">
                <input type="date" class="input-field" id="lastPeriodDate" placeholder="Last period start">
                <button class="btn btn-small" onclick="updateLastPeriod()">Update</button>
            </div>
            <div class="input-group">
                <input type="number" class="input-field" id="periodLengthInput" placeholder="Period length (days)" value="5">
                <button class="btn btn-small" onclick="updatePeriodLength()">Update</button>
            </div>
        </div>

        <div class="card">
            <h3>üå°Ô∏è Symptoms Tracker</h3>
            <div class="goals-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="goal-item" onclick="toggleSymptom(this, 'cramps')">
                    <div>üò£</div>
                    <div>Cramps</div>
                </div>
                <div class="goal-item" onclick="toggleSymptom(this, 'headache')">
                    <div>ü§ï</div>
                    <div>Headache</div>
                </div>
                <div class="goal-item" onclick="toggleSymptom(this, 'bloating')">
                    <div>ü§∞</div>
                    <div>Bloating</div>
                </div>
                <div class="goal-item" onclick="toggleSymptom(this, 'mood')">
                    <div>üò¢</div>
                    <div>Mood Changes</div>
                </div>
                <div class="goal-item" onclick="toggleSymptom(this, 'fatigue')">
                    <div>üò¥</div>
                    <div>Fatigue</div>
                </div>
                <div class="goal-item" onclick="toggleSymptom(this, 'cravings')">
                    <div>üç´</div>
                    <div>Cravings</div>
                </div>
            </div>
        </div>
    </div>

    <!-- MIGRAINE TRACKER SECTION -->
    <div id="migraine" class="section">
        <h2>üß† Migraine Tracker</h2>

        <div class="card" style="background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border: 1px solid rgba(59, 130, 246, 0.15);">
            <h3 style="color: #1e40af;">üìä Current Status</h3>
            <div style="text-align: center; padding: 2rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem; color: #10b981; font-weight: 600;" id="migraineDays">0</div>
                <div style="color: #059669; font-weight: 500; font-size: 1.2rem;">Days since last migraine</div>
            </div>
        </div>

        <div class="card">
            <h3>‚ö° Log New Migraine</h3>
            <div class="input-group">
                <select class="input-field" id="painLevel">
                    <option value="">Pain Level</option>
                    <option value="1">1 - Mild</option>
                    <option value="2">2 - Mild-Moderate</option>
                    <option value="3">3 - Moderate</option>
                    <option value="4">4 - Moderate-Severe</option>
                    <option value="5">5 - Severe</option>
                </select>
                <button class="btn btn-small" onclick="logMigraine()">Log</button>
            </div>
            
            <div style="margin: 1rem 0;">
                <h4 style="color: #047857; margin-bottom: 0.5rem;">Common Triggers</h4>
                <div class="goals-grid" style="grid-template-columns: repeat(2, 1fr);">
                    <div class="goal-item" onclick="toggleTrigger(this, 'stress')">
                        <div>üò∞</div>
                        <div>Stress</div>
                    </div>
                    <div class="goal-item" onclick="toggleTrigger(this, 'sleep')">
                        <div>üò¥</div>
                        <div>Poor Sleep</div>
                    </div>
                    <div class="goal-item" onclick="toggleTrigger(this, 'hormones')">
                        <div>üå∏</div>
                        <div>Hormonal</div>
                    </div>
                    <div class="goal-item" onclick="toggleTrigger(this, 'food')">
                        <div>üç∑</div>
                        <div>Food/Drink</div>
                    </div>
                    <div class="goal-item" onclick="toggleTrigger(this, 'weather')">
                        <div>üå¶Ô∏è</div>
                        <div>Weather</div>
                    </div>
                    <div class="goal-item" onclick="toggleTrigger(this, 'dehydration')">
                        <div>üíß</div>
                        <div>Dehydration</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üìà Migraine History</h3>
            <div id="migrainerHistory">
                <p style="color: #6b7280;">No migraines logged yet</p>
            </div>
        </div>
    </div>

    <!-- GUIDES SECTION -->
    <div id="guides" class="section">
        <h2>üìñ Wellness Guides</h2>

        <div class="recipe-card" onclick="showGuide('cortisol')">
            <div class="recipe-title">üåø Cortisol Reduction Guide</div>
            <div class="recipe-description">Natural ways to lower stress hormones for better health</div>
            <div class="recipe-tags">
                <span class="recipe-tag">Stress Relief</span>
                <span class="recipe-tag">Hormones</span>
            </div>
        </div>

        <div class="recipe-card" onclick="showGuide('intermittent-fasting')">
            <div class="recipe-title">‚è∞ Intermittent Fasting for 50+</div>
            <div class="recipe-description">Safe and effective fasting strategies for mature women</div>
            <div class="recipe-tags">
                <span class="recipe-tag">Weight Loss</span>
                <span class="recipe-tag">Metabolism</span>
            </div>
        </div>

        <div class="recipe-card" onclick="showGuide('hormone-balance')">
            <div class="recipe-title">‚öñÔ∏è Hormone Balance Naturally</div>
            <div class="recipe-description">Food and lifestyle choices for hormonal harmony</div>
            <div class="recipe-tags">
                <span class="recipe-tag">Menopause</span>
                <span class="recipe-tag">Natural Health</span>
            </div>
        </div>

        <div class="recipe-card" onclick="showGuide('sleep-optimization')">
            <div class="recipe-title">üò¥ Sleep Optimization</div>
            <div class="recipe-description">Improve sleep quality for better metabolism and mood</div>
            <div class="recipe-tags">
                <span class="recipe-tag">Sleep</span>
                <span class="recipe-tag">Recovery</span>
            </div>
        </div>

        <div class="recipe-card" onclick="showGuide('gut-health')">
            <div class="recipe-title">ü¶† Gut Health Reset</div>
            <div class="recipe-description">Heal your gut for better digestion and immunity</div>
            <div class="recipe-tags">
                <span class="recipe-tag">Digestion</span>
                <span class="recipe-tag">Healing</span>
            </div>
        </div>
    </div>

    <!-- SHOPPING LIST SECTION -->
    <div id="shopping" class="section">
        <h2>üõí Smart Shopping List</h2>
        
        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
            <button class="btn btn-small" onclick="generateShoppingList()">üìù Generate from Meals</button>
            <button class="btn btn-small" onclick="exportShoppingList()" style="background: rgba(16, 185, 129, 0.2); color: #047857;">üì§ Export List</button>
            <button class="btn btn-small" onclick="clearShoppingList()" style="background: rgba(239, 68, 68, 0.2); color: #dc2626;">üóëÔ∏è Clear All</button>
        </div>

        <div class="card">
            <h3>ü•¨ Vegetables & Fruits</h3>
            <div id="vegetablesCategory" style="margin: 1.5rem 0;">
                <!-- Items will be populated by JavaScript -->
            </div>
        </div>

        <div class="card">
            <h3>ü•© Proteins</h3>
            <div id="proteinsCategory" style="margin: 1.5rem 0;">
                <!-- Items will be populated by JavaScript -->
            </div>
        </div>

        <div class="card">
            <h3>ü•õ Pantry Staples</h3>
            <div id="pantryCategory" style="margin: 1.5rem 0;">
                <!-- Items will be populated by JavaScript -->
            </div>
        </div>

        <div class="card">
            <h3>‚ûï Add Custom Item</h3>
            <div class="input-group">
                <input type="text" class="input-field" id="customItemInput" placeholder="Add your own item...">
                <select class="input-field" id="customCategory" style="flex: 0.7;">
                    <option value="vegetables">Vegetables</option>
                    <option value="proteins">Proteins</option>
                    <option value="pantry">Pantry</option>
                </select>
                <button class="btn btn-small" onclick="addCustomItem()">Add</button>
            </div>
        </div>
    </div>

    <!-- ADD THIS JAVASCRIPT BEFORE THE CLOSING </script> TAG -->
    <script>
        // Additional variables for Part 2
        let weightHistory = [];
        let measurementHistory = {};
        let cycleData = {
            avgLength: 28,
            lastPeriod: null,
            periodLength: 5
        };
        let migraines = [];
        let shoppingList = {
            vegetables: ['Spinach', 'Avocados', 'Cucumber', 'Broccoli', 'Zucchini', 'Sweet Potatoes', 'Bell Peppers', 'Cauliflower'],
            proteins: ['Wild Salmon', 'Pasture Eggs', 'Almond Butter', 'Bone Broth', 'Organic Chicken', 'Grass-fed Beef'],
            pantry: ['Coconut Oil', 'Olive Oil', 'Chia Seeds', 'Turmeric', 'Ginger', 'Apple Cider Vinegar', 'Himalayan Salt']
        };

        // Progress Tracker Functions
        function addWeight() {
            const weight = document.getElementById('weightInput').value;
            if (weight) {
                const entry = {
                    weight: parseFloat(weight),
                    date: new Date().toLocaleDateString()
                };
                weightHistory.push(entry);
                displayWeightHistory();
                document.getElementById('weightInput').value = '';
                saveProgressData();
            }
        }

        function addMeasurement(type) {
            const input = document.getElementById(type + 'Input');
            const value = input.value;
            if (value) {
                if (!measurementHistory[type]) measurementHistory[type] = [];
                measurementHistory[type].push({
                    measurement: parseFloat(value),
                    date: new Date().toLocaleDateString()
                });
                displayMeasurementHistory();
                input.value = '';
                saveProgressData();
            }
        }

        function displayWeightHistory() {
            const container = document.getElementById('weightHistory');
            if (weightHistory.length === 0) {
                container.innerHTML = '<p style="color: #6b7280;">No weight entries yet</p>';
                return;
            }
            
            let html = '';
            weightHistory.slice(-5).reverse().forEach(entry => {
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; margin: 0.5rem 0; border: 1px solid rgba(34, 197, 94, 0.1);">
                        <span>${entry.date}</span>
                        <span style="font-weight: 600; color: #10b981; font-size: 1.1rem;">${entry.weight} lbs</span>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function displayMeasurementHistory() {
            const container = document.getElementById('measurementHistory');
            let html = '';
            
            Object.keys(measurementHistory).forEach(type => {
                const latest = measurementHistory[type][measurementHistory[type].length - 1];
                if (latest) {
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; margin: 0.5rem 0; border: 1px solid rgba(34, 197, 94, 0.1);">
                            <span>${type.charAt(0).toUpperCase() + type.slice(1)} (${latest.date})</span>
                            <span style="font-weight: 600; color: #10b981; font-size: 1.1rem;">${latest.measurement}"</span>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html || '<p style="color: #6b7280;">No measurements yet</p>';
        }

        // Period Tracker Functions
        function updateCycleLength() {
            const length = document.getElementById('cycleLengthInput').value;
            if (length) {
                cycleData.avgLength = parseInt(length);
                updateCycleDisplay();
                saveCycleData();
            }
        }

        function updateLastPeriod() {
            const date = document.getElementById('lastPeriodDate').value;
            if (date) {
                cycleData.lastPeriod = new Date(date);
                updateCycleDisplay();
                saveCycleData();
            }
        }

        function updatePeriodLength() {
            const length = document.getElementById('periodLengthInput').value;
            if (length) {
                cycleData.periodLength = parseInt(length);
                updateCycleDisplay();
                saveCycleData();
            }
        }

        function updateCycleDisplay() {
            if (!cycleData.lastPeriod) return;
            
            const today = new Date();
            const lastPeriod = new Date(cycleData.lastPeriod);
            const daysSince = Math.floor((today - lastPeriod) / (1000 * 60 * 60 * 24));
            const cycleDay = (daysSince % cycleData.avgLength) + 1;
            const daysUntilNext = cycleData.avgLength - (daysSince % cycleData.avgLength);
            
            document.getElementById('currentCycleDay').textContent = `Day ${cycleDay}`;
            document.getElementById('lastPeriod').textContent = daysSince;
            document.getElementById('nextPeriod').textContent = daysUntilNext;
            document.getElementById('avgCycleLength').textContent = cycleData.avgLength;
            document.getElementById('periodDays').textContent = cycleData.periodLength;
            
            let phase = 'Follicular Phase';
            if (cycleDay <= cycleData.periodLength) phase = 'Menstrual Phase';
            else if (cycleDay > cycleData.avgLength / 2 - 2 && cycleDay < cycleData.avgLength / 2 + 2) phase = 'Ovulation Phase';
            else if (cycleDay > cycleData.avgLength / 2 + 2) phase = 'Luteal Phase';
            
            document.getElementById('currentPhase').textContent = phase;
        }

        // Migraine Tracker Functions
        function logMigraine() {
            const painLevel = document.getElementById('painLevel').value;
            if (painLevel) {
                const migraine = {
                    date: new Date().toLocaleDateString(),
                    pain: parseInt(painLevel),
                    triggers: getSelectedTriggers()
                };
                migraines.push(migraine);
                updateMigraineDays();
                saveMigrainerData();
                document.getElementById('painLevel').value = '';
                clearTriggers();
                displayMigrainerHistory();
            }
        }

        function updateMigraineDays() {
            const lastMigraine = migraines.length > 0 ? new Date(migraines[migraines.length - 1].date) : null;
            const daysSince = lastMigraine ? Math.floor((new Date() - lastMigraine) / (1000 * 60 * 60 * 24)) : 0;
            document.getElementById('migraineDays').textContent = daysSince;
        }

        function displayMigrainerHistory() {
            const container = document.getElementById('migrainerHistory');
            if (migraines.length === 0) {
                container.innerHTML = '<p style="color: #6b7280;">No migraines logged yet</p>';
                return;
            }
            
            let html = '';
            migraines.slice(-5).reverse().forEach(migraine => {
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: rgba(255, 255, 255, 0.7); border-radius: 12px; margin: 0.5rem 0; border: 1px solid rgba(34, 197, 94, 0.1);">
                        <div>
                            <div>${migraine.date}</div>
                            <div style="font-size: 0.8rem; color: #6b7280;">Pain Level: ${migraine.pain}/5</div>
                        </div>
                        <span style="font-weight: 600; color: #10b981; font-size: 1.1rem;">Level ${migraine.pain}</span>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // Shopping List Functions
        function generateShoppingList() {
            displayShoppingList();
        }

        function displayShoppingList() {
            Object.keys(shoppingList).forEach(category => {
                const container = document.getElementById(category + 'Category');
                let html = '';
                shoppingList[category].forEach((item, index) => {
                    html += `
                        <div style="display: flex; align-items: center; padding: 0.8rem; background: rgba(255, 255, 255, 0.7); border-radius: 10px; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(34, 197, 94, 0.1);" onclick="toggleShoppingItem(this)">
                            <input type="checkbox" style="margin-right: 1rem; width: 20px; height: 20px; accent-color: #10b981;">
                            <span>${item}</span>
                        </div>
                    `;
                });
                container.innerHTML = html;
            });
        }

        function toggleShoppingItem(element) {
            element.classList.toggle('checked');
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            
            if (element.classList.contains('checked')) {
                element.style.opacity = '0.6';
                element.style.textDecoration = 'line-through';
                element.style.background = 'rgba(16, 185, 129, 0.1)';
            } else {
                element.style.opacity = '1';
                element.style.textDecoration = 'none';
                element.style.background = 'rgba(255, 255, 255, 0.7)';
            }
        }

        function exportShoppingList() {
            const allItems = [];
            Object.entries(shoppingList).forEach(([category, items]) => {
                allItems.push(`\n${category.toUpperCase()}:`);
                items.forEach(item => allItems.push(`‚Ä¢ ${item}`));
            });
            
            const text = "üåø 50Plus Reset Shopping List\n" + allItems.join('\n');
            
            // Create downloadable file
            const blob = new Blob([text], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '50plus-reset-shopping-list.txt';
            a.click();
            
            // Also copy to clipboard for sharing
            navigator.clipboard.writeText(text).then(() => {
                alert('üìã Shopping list copied to clipboard and downloaded! Share with family! üåø');
            }).catch(() => {
                alert('üìÅ Shopping list downloaded!');
            });
        }

        function addCustomItem() {
            const item = document.getElementById('customItemInput').value;
            const category = document.getElementById('customCategory').value;
            
            if (item) {
                shoppingList[category].push(item);
                displayShoppingList();
                document.getElementById('customItemInput').value = '';
                saveShoppingData();
            }
        }

        function clearShoppingList() {
            if (confirm('Clear all shopping list items?')) {
                shoppingList = {
                    vegetables: [],
                    proteins: [],
                    pantry: []
                };
                displayShoppingList();
                saveShoppingData();
            }
        }

        // Photo Functions
        function addPhoto(type) {
            document.getElementById('photoInput').click();
            window.currentPhotoType = type;
        }

        function handlePhotoUpload() {
            const file = document.getElementById('photoInput').files[0];
            if (file && window.currentPhotoType) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const placeholder = document.getElementById(window.currentPhotoType + 'Photo');
                    placeholder.style.backgroundImage = `url(${e.target.result})`;
                    placeholder.style.backgroundSize = 'cover';
                    placeholder.innerHTML = '‚úì Photo Added';
                    placeholder.style.color = '#10b981';
                    placeholder.style.fontWeight = '600';
                };
                reader.readAsDataURL(file);
            }
        }

        // Helper functions
        function toggleSymptom(element, symptom) {
            element.classList.toggle('completed');
        }

        function toggleTrigger(element, trigger) {
            element.classList.toggle('completed');
        }

        function getSelectedTriggers() {
            const triggers = [];
            document.querySelectorAll('[onclick*="toggleTrigger"]').forEach(el => {
                if (el.classList.contains('completed')) {
                    const text = el.textContent.trim();
                    triggers.push(text);
                }
            });
            return triggers;
        }

        function clearTriggers() {
            document.querySelectorAll('[onclick*="toggleTrigger"]').forEach(el => {
                el.classList.remove('completed');
            });
        }

        function showGuide(guideId) {
            alert(`Opening ${guideId} guide! (You can expand this to show full guides)`);
        }

        // Data persistence for Part 2
        function saveProgressData() {
            localStorage.setItem('progressData', JSON.stringify({
                weightHistory: weightHistory,
                measurementHistory: measurementHistory
            }));
        }

        function saveCycleData() {
            localStorage.setItem('cycleData', JSON.stringify(cycleData));
        }

        function saveMigrainerData() {
            localStorage.setItem('migraines', JSON.stringify(migraines));
        }

        function saveShoppingData() {
            localStorage.setItem('shoppingList', JSON.stringify(shoppingList));
        }

        // Initialize Part 2 features when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Load all Part 2 data
            loadAllData();
            displayShoppingList();
        });

        function loadAllData() {
            // Load progress data
            const progressSaved = localStorage.getItem('progressData');
            if (progressSaved) {
                const data = JSON.parse(progressSaved);
                weightHistory = data.weightHistory || [];
                measurementHistory = data.measurementHistory || {};
                displayWeightHistory();
                displayMeasurementHistory();
            }
            
            // Load cycle data
            const cycleSaved = localStorage.getItem('cycleData');
            if (cycleSaved) {
                cycleData = JSON.parse(cycleSaved);
                updateCycleDisplay();
            }
            
            // Load migraine data
            const migrainerSaved = localStorage.getItem('migraines');
            if (migrainerSaved) {
                migraines = JSON.parse(migrainerSaved);
                updateMigraineDays();
                displayMigrainerHistory();
            }
            
            // Load shopping data
            const shoppingSaved = localStorage.getItem('shoppingList');
            if (shoppingSaved) {
                shoppingList = JSON.parse(shoppingSaved);
            }
        }
    </script>
